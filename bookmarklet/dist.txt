javascript:void((function(n){$(function(){var j='turn';var k=false;var l=1500;var m=setInterval(tick,l);setInterval(anime,150);$('#bodybox').children().eq(1).append('<span id="msg"></span>');$(window).keydown(function(e){if(e.keyCode==17&&k){tick(true)}if(e.keyCode==32){k=!k}if(e.keyCode==38){l+=500;window.clearInterval(m);m=setInterval(tick,l)}if(e.keyCode==40){if(l>500){l-=500}window.clearInterval(m);m=setInterval(tick,l)}var a='';if(k){a+=' 一時停止中'}a+=' 更新間隔：'+l;$("#msg").text(a);return false});function anime(){var a=$('#bodybox');a.find('.anime').animate({'marginLeft':'8px'},75).animate({'marginLeft':'5px'},75)}function tick(a){if(k&&!a){return}var b=$('#bodybox');var c=b.children().eq(3);reset_eff();if(c.find('p#pagename').length){return}c.remove();var c=b.children().eq(3);if(c.is('.turnStart')){}else if(c.is('.TSS')){set_status();reset_eff()}else{var d=c.find('.statusBox:first');var e=c.find('.statusBox');var f=d.find('.nameInBox');var g=c.find('.logs').text();f=f.text();set_status();reset_eff(true);log=g.split("\n");var h=0;for(var i=0;i<log.length;i++){log_text=log[i];if(i==1||h==1){h=0;match=log_text.match(/^(.*)の([^の]*?)$/);if(match){chara_eff(match[1],'skill',match[2])}match=log_text.match(/^(.*?)の通常攻撃$/);if(match){chara_eff(match[1],'atk')}match=log_text.match(/^(.*?)の通常回復$/);if(match){chara_eff(match[1],'heal')}}if(log_text=='連続行動'){h=1}match=log_text.match(/^(.*?)は戦闘を離脱$/);if(match){chara_del(match[1])}match=log_text.match(/^(.*?)に小ダメージ$/);if(match){chara_eff(match[1],'dmg_S')}match=log_text.match(/^(.*?)に中ダメージ$/);if(match){chara_eff(match[1],'dmg_M')}match=log_text.match(/^(.*?)に大ダメージ$/);if(match){chara_eff(match[1],'dmg_L')}match=log_text.match(/^(.*?)の小ダメージを回復$/);if(match){chara_eff(match[1],'dmg_S')}match=log_text.match(/^(.*?)の中ダメージを回復$/);if(match){chara_eff(match[1],'dmg_M')}match=log_text.match(/^(.*?)の大ダメージを回復$/);if(match){chara_eff(match[1],'dmg_L')}match=log_text.match(/^(.*?)の中ダメージを軽減$/);if(match){chara_eff(match[1],'dmg_M')}match=log_text.match(/^(.*?)の大ダメージを軽減$/);if(match){chara_eff(match[1],'dmg_L')}}chara_act(f);for(var i=1;i<e.length;i++){var f=$(e[i]).find('.nameInBox');f=f.text();target_chara(f)}}}function set_status(){var f=$('#bodybox');var g=f.children().eq(3);g.find('.statusBox').each(function(){var b=$(this).find('.nameInBox').text();var c=$(this).find('.statuses').clone();var d=$('#bodybox');var e=d.children().eq(2);e.find('.statusBox').each(function(){var a=$(this).find('.nameInBox').text();if(b==a){$(this).find('.statuses').remove();$(this).append(c)}})})}function chara_act(b){var c=$('#bodybox');var d=c.children().eq(2);d.find('.statusBox').each(function(){var a=$(this).find('.nameInBox').text();if(b==a){$(this).addClass('act_chara');if($(this).is('.blueTeam')){$(this).css('left','50px')}else{$(this).css('left','-50px')}}else{$(this).css('left','0')}})}function target_chara(b){var c=$('#bodybox');var d=c.children().eq(2);d.find('.statusBox').each(function(){var a=$(this).find('.nameInBox').text();if(b==a){$(this).addClass('anime')}})}function chara_del(b){var c=$('#bodybox');var d=c.children().eq(2);d.find('.statusBox').each(function(){var a=$(this).find('.nameInBox').text();if(b==a){$(this).remove()}})}function chara_eff(b,c,d){var e=$('#bodybox');var f=e.children().eq(2);f.find('.statusBox').each(function(){var a=$(this).find('.nameInBox').text();if(b==a){if($(this).is('.blueTeam')){}else{}if(c=='atk'){$(this).css('background-color','#ffdddd')}if(c=='heal'){$(this).css('background-color','#ddddff')}if(c=='skill'){$(this).css('background-color','#ffffdd');$(this).find('.nameInBox').after('<div class="act_name" style="'+'float: right; top: -20px; background-color: white; z-index: 1; position: relative; padding: 2px 5px;'+'">'+d+'</div>')}if(c=='dmg_S'){$(this).find('.statuses').children().eq(2).css('width','50px');$(this).find('.statuses').children().eq(3).css('font-size','34px')}if(c=='dmg_M'){$(this).find('.statuses').children().eq(4).css('width','50px');$(this).find('.statuses').children().eq(5).css('font-size','34px')}if(c=='dmg_L'){$(this).find('.statuses').children().eq(6).css('width','50px');$(this).find('.statuses').children().eq(7).css('font-size','34px')}}})}function reset_eff(b){var c=$('#bodybox');var d=c.children().eq(2);d.find('.act_name').remove();d.find('.statusBox').each(function(){$(this).removeClass('anime');$(this).removeClass('act_chara');$(this).css('margin','5px');$(this).css('left','0');$(this).find('.statuses').children().css('width','auto');$(this).find('.statuses').children().css('font-size','17px');var a=$(this).find('.statuses');$(this).css('background-color','rgb(250,250,250)');for(var i=1;i<6;i++){if(!b){$(this).find('.statuses').children().eq(1+i*2).removeClass('good').removeClass('bad')}if($(this).find('.statuses').children().eq(1+i*2).text()!='0'){$(this).find('.statuses').children().eq(1+i*2).css('font-size','30px')}else{$(this).find('.statuses').children().eq(1+i*2).css('font-size','17px')}}})}})})());